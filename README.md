Snow Scraper ⛰️❄️

Snow Scraper is a Raspberry Pi–based project that scrapes live snowfall
reports from major ski resorts, displays the data on a touchscreen LCD,
and triggers fun visual and audio alerts when a powder day arrives.

It’s built for the Raspberry Pi Zero 2 W (Python 3.9) and integrates a
WS2812 RGB LED ring, passive buzzer, and touchscreen display. Perfect
for ski bums, hackers, and anyone who wants to wake up to the sound of
fresh snow.

------------------------------------------------------------------------

Features

-   Real-time snow data
    Scrapes snowfall reports (24hr, 7-day, base depth) from resorts like
    Sun Peaks, Whistler, Big White, Revelstoke, and more.

-   Touchscreen GUI
    A 320×240 ILI9341 LCD with resistive touchscreen lets you navigate
    reports, settings, and updates.

-   Powder Day Anthem
    A passive buzzer plays a looping melody when your snow thresholds
    are hit.

-   Snow LEDs
    WS2812 RGB LED ring (7 pixels) shows snowfall amounts with color
    gradients, breathing effects for changes, sparkles for >15 cm, and
    rainbow fades on startup.

-   Configurable alarms
    Trigger at a set time if snowfall exceeds a threshold, or use
    incremental “always-on” alarms (e.g. every +5 cm).

-   Watchdog daemon
    snowscraper.py monitors snowgui.py, restarts it on crash, heartbeat
    timeout, or memory leak, and logs everything.

-   Touchscreen calibration
    calibrate_touchscreen.py provides a standalone two-point calibrator
    with results saved in JSON.

------------------------------------------------------------------------

Hardware Requirements

-   Raspberry Pi Zero 2 W (tested)
-   ILI9341 SPI LCD (320×240) with XPT2046 touch controller
-   WS2812 RGB LED ring (7 pixels)
-   Passive buzzer (wired to GPIO18)
-   Wi-Fi connection for fetching resort data

------------------------------------------------------------------------

Software Requirements

-   Raspberry Pi OS (32-bit Lite recommended)
-   Python 3.9
-   Required libraries:

    sudo apt-get update
    sudo apt-get install python3-pip python3-pil python3-spidev
    sudo pip3 install requests packaging beautifulsoup4 pillow luma.lcd rpi-ws281x psutil python-daemon

------------------------------------------------------------------------

Installation

Clone the repository:

    git clone https://github.com/spellbin/snowscraper.git
    cd snowscraper

(Optional) run the standalone calibrator:

    sudo python3 calibrate_touchscreen.py

------------------------------------------------------------------------

Usage

Start the main GUI:

    python3 snowgui.py

Run with watchdog daemon (recommended):

    python3 snowscraper.py        # daemon mode
    python3 snowscraper.py --foreground   # run in foreground for debugging

------------------------------------------------------------------------

Configuration

-   skihill.conf — stores selected resort index.
-   alarm.conf — stores alarm settings.
-   snow_log.json — rolling daily snowfall logs (per resort).
-   touch_calibration.json — generated by calibrator, used for touch
    mapping.
-   heartbeat.txt — updated periodically by snowgui.py, checked by
    watchdog.

------------------------------------------------------------------------

LED Demo Mode

You can run the LEDs without fetching live snow data:

    python3 snowgui.py --led-demo
    python3 snowgui.py --led-demo "0,2,5,10,15,20,0"

------------------------------------------------------------------------

Project Structure

    .
    ├── snowgui.py              # Main GUI + scraper
    ├── snowscraper.py          # Watchdog daemon
    ├── calibrate_touchscreen.py # Standalone calibration tool
    ├── conf/                   # Config + calibration data
    ├── logs/                   # Log output
    └── images/                 # UI image assets (mainmenu.png, splashlogo.png, etc.)

------------------------------------------------------------------------

Updating

The app can self-update via the Update screen, which checks GitHub
releases.
To manually update:

    git fetch --all --tags
    git checkout tags/<version>

------------------------------------------------------------------------
